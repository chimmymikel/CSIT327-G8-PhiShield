{% extends "phishield/base.html" %}
{% load static %}

{% block title %}My Profile | PhiShield{% endblock %}

{% block content %}
<style>
    /* --- MODERN THEME WITH VIBRANT GRADIENTS --- */
    :root {
        --brand-primary: #3b82f6;
        --brand-secondary: #8b5cf6;
        --brand-gradient: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        --accent-cyan: #06b6d4;
        --accent-purple: #a855f7;
        --accent-green: #10b981;
        --accent-red: #ef4444;
        --accent-orange: #f59e0b;
        --text-dark: #1e293b;
        --text-muted: #64748b;
        --text-secondary: #475569;
        --card-radius: 20px;
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        
        /* Card & Background Colors */
        --card-bg: white;
        --card-border: rgba(59, 130, 246, 0.1);
        --avatar-ring-bg: white;
        --verified-border: white;
        --btn-outline-bg: white;
        --btn-outline-border: #e2e8f0;
        --btn-outline-hover-bg: #f8fafc;
        
        /* Stat Box Colors */
        --stat-box-bg: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        --stat-box-border: #e2e8f0;
        --stat-box-featured-bg: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        --stat-box-featured-border: #bfdbfe;
        
        /* Role Badge */
        --role-badge-bg: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
        --role-badge-color: #1e40af;
        --role-badge-border: #bfdbfe;
        
        /* Timeline */
        --timeline-line-bg: linear-gradient(to bottom, #cbd5e1 0%, transparent 100%);
        --timeline-dot-border: white;
        --timeline-card-bg: #f8fafc;
        --timeline-card-border: #e2e8f0;
        --timeline-card-hover-bg: white;
        --timeline-fade-bg: linear-gradient(to bottom, transparent 0%, white 100%);
        
        /* Bio Section */
        --bio-bg: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        --bio-border: #cbd5e1;
        
        /* Stat Icon Backgrounds */
        --stat-icon-blue-bg: #dbeafe;
        --stat-icon-blue-color: #0284c7;
        --stat-icon-purple-bg: #f3e8ff;
        --stat-icon-purple-color: #9333ea;
        --stat-icon-red-bg: #fee2e2;
        --stat-icon-red-color: #dc2626;
        --stat-icon-green-bg: #a7f3d0;
        --stat-icon-green-color: #059669;
        
        /* Stat Box Variants */
        --stat-box-red-bg: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
        --stat-box-red-border: #fecaca;
        --stat-box-green-bg: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
        --stat-box-green-border: #a7f3d0;
    }

    .dark {
        --text-dark: white;
        --text-muted: #94a3b8;
        --text-secondary: #cbd5e1;
        
        /* Card & Background Colors */
        --card-bg: #0b1220;
        --card-border: #334155;
        --avatar-ring-bg: #1e293b;
        --verified-border: #1e293b;
        --btn-outline-bg: #0b1220;
        --btn-outline-border: #334155;
        --btn-outline-hover-bg: #1e293b;
        
        /* Stat Box Colors */
        --stat-box-bg: #1e293b;
        --stat-box-border: #334155;
        --stat-box-featured-bg: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        --stat-box-featured-border: #475569;
        
        /* Role Badge */
        --role-badge-bg: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        --role-badge-color: #60a5fa;
        --role-badge-border: #475569;
        
        /* Timeline */
        --timeline-line-bg: linear-gradient(to bottom, #475569 0%, transparent 100%);
        --timeline-dot-border: #1e293b;
        --timeline-card-bg: #1e293b;
        --timeline-card-border: #334155;
        --timeline-card-hover-bg: #0b1220;
        --timeline-fade-bg: linear-gradient(to bottom, transparent 0%, #0b1220 100%);
        
        /* Bio Section */
        --bio-bg: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        --bio-border: #475569;
        
        /* Stat Icon Backgrounds */
        --stat-icon-blue-bg: #1e3a5f;
        --stat-icon-blue-color: #60a5fa;
        --stat-icon-purple-bg: #2d1f3d;
        --stat-icon-purple-color: #c084fc;
        --stat-icon-red-bg: #3d2626;
        --stat-icon-red-color: #f87171;
        --stat-icon-green-bg: #26362e;
        --stat-icon-green-color: #34d399;
        
        /* Stat Box Variants */
        --stat-box-red-bg: linear-gradient(135deg, #2d1f1f 0%, #3d2626 100%);
        --stat-box-red-border: #5a3737;
        --stat-box-green-bg: linear-gradient(135deg, #1f2d26 0%, #26362e 100%);
        --stat-box-green-border: #375a45;
    }

    /* Keep original background */

    /* --- MODERN CARDS --- */
    .modern-card {
        background: var(--card-bg);
        border-radius: var(--card-radius);
        border: 1px solid var(--card-border);
        box-shadow: var(--shadow-md);
        transition: all 0.3s ease;
        overflow: hidden;
    }

    .modern-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }

    /* --- PROFILE HEADER --- */
    .profile-header-bg {
        height: 180px;
        background: var(--brand-gradient);
        background-image: 
            radial-gradient(circle at 10% 20%, rgba(255,255,255,0.15) 0%, transparent 30%),
            radial-gradient(circle at 90% 80%, rgba(255,255,255,0.15) 0%, transparent 30%);
        position: relative;
    }

    .profile-avatar-wrapper {
        margin-top: -90px;
        position: relative;
        display: inline-block;
    }

    .profile-avatar-ring {
        padding: 6px;
        background: var(--avatar-ring-bg);
        border-radius: 50%;
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        display: inline-block;
    }

    .profile-avatar-img {
        width: 160px;
        height: 160px;
        border-radius: 50%;
        object-fit: cover;
        display: block;
    }

    .verified-badge {
        position: absolute;
        bottom: 5px;
        right: 5px;
        width: 44px;
        height: 44px;
        background: var(--accent-green);
        border: 4px solid var(--verified-border);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3);
    }

    /* --- BUTTONS --- */
    .btn-gradient {
        background: var(--brand-gradient);
        color: white;
        border: none;
        font-weight: 600;
        padding: 0.7rem 1.8rem;
        border-radius: 12px;
        transition: all 0.2s ease;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    .btn-gradient:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
        color: white;
    }

    .btn-outline-custom {
        border: 2px solid var(--btn-outline-border);
        color: var(--text-dark);
        background: var(--btn-outline-bg);
        font-weight: 600;
        padding: 0.7rem 1.2rem;
        border-radius: 12px;
        transition: all 0.2s ease;
    }

    .btn-outline-custom:hover {
        border-color: var(--brand-primary);
        background: var(--btn-outline-hover-bg);
        color: var(--brand-primary);
    }

    /* --- STAT BOXES --- */
    .stat-box {
        background: var(--stat-box-bg);
        border-radius: 16px;
        padding: 1.3rem;
        border: 1px solid var(--stat-box-border);
        transition: all 0.2s ease;
        height: 100%;
    }

    .stat-box:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .stat-box.featured {
        background: var(--stat-box-featured-bg);
        border-color: var(--stat-box-featured-border);
    }

    .stat-icon {
        width: 50px;
        height: 50px;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        margin-bottom: 0.8rem;
    }

    /* --- ROLE BADGE --- */
    .role-badge {
        background: var(--role-badge-bg);
        color: var(--role-badge-color);
        padding: 0.5rem 1.5rem;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.9rem;
        border: 1px solid var(--role-badge-border);
    }

    /* --- TIMELINE --- */
    .timeline-wrapper {
        position: relative;
        padding-left: 2rem;
    }

    .timeline-line {
        position: absolute;
        left: 8px;
        top: 20px;
        bottom: 0;
        width: 2px;
        background: var(--timeline-line-bg);
    }

    .timeline-item {
        position: relative;
        margin-bottom: 1.5rem;
    }

    .timeline-dot {
        position: absolute;
        left: -24px;
        top: 18px;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        border: 3px solid var(--timeline-dot-border);
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        z-index: 2;
    }

    .timeline-dot.danger { background: var(--accent-red); }
    .timeline-dot.safe { background: var(--accent-green); }
    .timeline-dot.warn { background: var(--accent-orange); }

    .timeline-card {
        background: var(--timeline-card-bg);
        border-radius: 14px;
        padding: 1.2rem;
        border: 1px solid var(--timeline-card-border);
        transition: all 0.2s ease;
    }

    .timeline-card:hover {
        background: var(--timeline-card-hover-bg);
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    /* --- LABELS --- */
    .label-fancy {
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-muted);
        margin-bottom: 0.4rem;
    }

    /* --- SECTION HEADERS --- */
    .section-header {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .section-header i {
        color: var(--brand-primary);
    }

    /* --- CONTAINER --- */
    .profile-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem 1.5rem 3rem;
    }

    /* --- ICON COLORS --- */
    .icon-primary { color: var(--brand-primary); }
    .icon-cyan { color: var(--accent-cyan); }
    .icon-purple { color: var(--accent-purple); }
    .icon-green { color: var(--accent-green); }
    .icon-red { color: var(--accent-red); }
    .icon-orange { color: var(--accent-orange); }

    /* --- TEXT COLORS --- */
    .text-dark { color: var(--text-dark) !important; }
    .text-muted { color: var(--text-muted) !important; }
    .text-secondary { color: var(--text-secondary) !important; }

</style>

<div class="profile-container">
    <div class="row g-4">
        
        <!-- LEFT SIDEBAR: Profile Card -->
        <div class="col-lg-4">
            <div class="modern-card mb-4 text-center">
                <!-- Gradient Header -->
                <div class="profile-header-bg"></div>
                
                <!-- Profile Content -->
                <div class="px-4 pb-4">
                    <!-- Avatar -->
                    <div class="profile-avatar-wrapper">
                        <div class="profile-avatar-ring">
                            {% if profile.profile_picture %}
                                <img src="{{ profile.profile_picture.url }}" class="profile-avatar-img" alt="{{ user.username }}">
                            {% else %}
                                <div class="profile-avatar-img d-flex align-items-center justify-content-center text-white display-3 fw-bold" style="background: var(--brand-gradient);">
                                    {{ user.username|first|upper }}
                                </div>
                            {% endif %}
                        </div>
                        
                        {% if profile.email_verified %}
                        <div class="verified-badge">
                            <i class="fas fa-check text-white"></i>
                        </div>
                        {% endif %}
                    </div>

                    <!-- User Info -->
                    <div class="mt-4">
                        <h4 class="fw-bold text-dark mb-1">{{ user.get_full_name|default:user.username }}</h4>
                        <p class="text-muted mb-3">@{{ user.username }}</p>
                        
                        <div class="role-badge d-inline-block mb-4">
                            <i class="fas fa-user-shield me-2"></i>{{ profile.get_role_display }}
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-2 justify-content-center">
                            <a href="{% url 'phishield:edit_profile' %}" class="btn btn-gradient flex-grow-1">
                                <i class="fas fa-edit me-2"></i>Edit Profile
                            </a>
                            <a href="{% url 'phishield:settings' %}" class="btn btn-outline-custom">
                                <i class="fas fa-cog"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Stats Card -->
            <div class="modern-card p-4">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h6 class="fw-bold mb-0 text-dark">
                        <i class="fas fa-shield-alt icon-primary me-2"></i>Security Stats
                    </h6>
                    <span class="badge bg-success rounded-pill px-3 py-2">{{ profile.success_rate }}% Score</span>
                </div>

                <div class="row g-3">
                    <!-- Total Scans - Featured -->
                    <div class="col-12">
                        <div class="stat-box featured">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="text-start">
                                    <div class="label-fancy">Total Scans</div>
                                    <div class="h2 fw-bold text-dark mb-0">{{ profile.total_checks }}</div>
                                </div>
                                <div class="stat-icon" style="background: var(--brand-gradient); color: white;">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- URL Checks -->
                    <div class="col-6">
                        <div class="stat-box text-center">
                            <div class="stat-icon mx-auto" style="background: var(--stat-icon-blue-bg); color: var(--stat-icon-blue-color);">
                                <i class="fas fa-link"></i>
                            </div>
                            <div class="h4 fw-bold mb-0 text-dark">{{ total_url_checks }}</div>
                            <div class="small text-muted">URLs</div>
                        </div>
                    </div>

                    <!-- Message Checks -->
                    <div class="col-6">
                        <div class="stat-box text-center">
                            <div class="stat-icon mx-auto" style="background: var(--stat-icon-purple-bg); color: var(--stat-icon-purple-color);">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="h4 fw-bold mb-0 text-dark">{{ total_message_checks }}</div>
                            <div class="small text-muted">Messages</div>
                        </div>
                    </div>

                    <!-- Threats Detected -->
                    <div class="col-6">
                        <div class="stat-box text-center" style="background: var(--stat-box-red-bg); border-color: var(--stat-box-red-border);">
                            <div class="stat-icon mx-auto" style="background: var(--stat-icon-red-bg); color: var(--stat-icon-red-color);">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="h4 fw-bold mb-0 text-danger">{{ profile.threats_detected }}</div>
                            <div class="small text-danger fw-semibold">Threats</div>
                        </div>
                    </div>

                    <!-- Safe Checks -->
                    <div class="col-6">
                        <div class="stat-box text-center" style="background: var(--stat-box-green-bg); border-color: var(--stat-box-green-border);">
                            <div class="stat-icon mx-auto" style="background: var(--stat-icon-green-bg); color: var(--stat-icon-green-color);">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="h4 fw-bold mb-0 text-success">{{ profile.safe_checks }}</div>
                            <div class="small text-success fw-semibold">Safe</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RIGHT CONTENT: Details & History -->
        <div class="col-lg-8">
            
            <!-- Personal Details Card -->
            <div class="modern-card p-4 mb-4">
                <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
                    <h5 class="section-header mb-0">
                        <i class="fas fa-user-circle"></i>
                        Personal Details
                    </h5>
                    <div class="text-muted small">ID: #{{ user.id }}</div>
                </div>
                
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="label-fancy"><i class="fas fa-envelope icon-cyan me-1"></i>Email Address</div>
                        <div class="fw-semibold text-dark">{{ user.email }}</div>
                    </div>
                    <div class="col-md-6">
                        <div class="label-fancy"><i class="fas fa-phone icon-green me-1"></i>Phone Number</div>
                        <div class="fw-semibold text-dark">{{ profile.phone|default:"Not provided" }}</div>
                    </div>
                    <div class="col-md-6">
                        <div class="label-fancy"><i class="fas fa-map-marker-alt icon-red me-1"></i>Location</div>
                        <div class="fw-semibold text-dark">{{ profile.location|default:"Not provided" }}</div>
                    </div>
                    <div class="col-md-6">
                        <div class="label-fancy"><i class="fas fa-building icon-purple me-1"></i>Company</div>
                        <div class="fw-semibold text-dark">{{ profile.company|default:"Not provided" }}</div>
                    </div>
                    <div class="col-12">
                        <div class="label-fancy"><i class="fas fa-info-circle icon-primary me-1"></i>About Me</div>
                        <div class="p-4 rounded-3" style="background: var(--bio-bg); border: 2px dashed var(--bio-border);">
                            {% if profile.bio %}
                                <p class="mb-0 text-secondary" style="line-height: 1.7;">{{ profile.bio|linebreaksbr }}</p>
                            {% else %}
                                <p class="mb-0 text-muted fst-italic text-center py-2">
                                    <i class="fas fa-pen me-2"></i>No bio added yet. Tell us about yourself!
                                </p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analysis History Card -->
            <div class="modern-card p-4">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h5 class="section-header mb-0">
                        <i class="fas fa-history"></i>
                        Analysis History
                    </h5>
                    {% if recent_links or recent_messages %}
                        <a href="{% url 'phishield:check_link' %}" class="btn btn-sm btn-gradient">
                            <i class="fas fa-plus me-1"></i> New Scan
                        </a>
                    {% endif %}
                </div>

                <div class="timeline-wrapper" id="timeline-container" style="max-height: 500px; overflow: hidden; position: relative;">
                    <div class="timeline-line"></div>

                    {% if recent_links or recent_messages %}
                        
                        <!-- URL Analysis Items -->
                        {% for link in recent_links %}
                        <div class="timeline-item">
                            <div class="timeline-dot {% if link.risk_level == 'high' %}danger{% elif link.risk_level == 'medium' %}warn{% else %}safe{% endif %}"></div>
                            
                            <div class="timeline-card">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <span class="fw-bold text-dark">
                                        <i class="fas fa-link icon-cyan me-2"></i>URL Analysis
                                    </span>
                                    <small class="text-muted">{{ link.date_checked|timesince }} ago</small>
                                </div>
                                <div class="text-truncate text-primary fw-medium mb-2" style="font-size: 0.9rem;">
                                    {{ link.url }}
                                </div>
                                
                                {% if link.risk_level == 'high' %}
                                    <span class="badge bg-danger rounded-pill">
                                        <i class="fas fa-exclamation-triangle me-1"></i>High Risk
                                    </span>
                                {% elif link.risk_level == 'medium' %}
                                    <span class="badge bg-warning text-dark rounded-pill">
                                        <i class="fas fa-exclamation-circle me-1"></i>Medium Risk
                                    </span>
                                {% else %}
                                    <span class="badge bg-success rounded-pill">
                                        <i class="fas fa-check me-1"></i>Safe
                                    </span>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}

                        <!-- Message Analysis Items -->
                        {% for message in recent_messages %}
                        <div class="timeline-item">
                            <div class="timeline-dot {% if message.risk_level == 'high' %}danger{% elif message.risk_level == 'medium' %}warn{% else %}safe{% endif %}"></div>
                            
                            <div class="timeline-card">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <span class="fw-bold text-dark">
                                        <i class="fas fa-envelope icon-purple me-2"></i>Message Analysis
                                    </span>
                                    <small class="text-muted">{{ message.date_checked|timesince }} ago</small>
                                </div>
                                <p class="text-muted small fst-italic mb-2 text-truncate">
                                    "{{ message.message }}"
                                </p>
                                
                                {% if message.risk_level == 'high' %}
                                    <span class="badge bg-danger rounded-pill">
                                        <i class="fas fa-bug me-1"></i>Phishing Detected
                                    </span>
                                {% elif message.risk_level == 'medium' %}
                                    <span class="badge bg-warning text-dark rounded-pill">
                                        <i class="fas fa-question-circle me-1"></i>Suspicious
                                    </span>
                                {% else %}
                                    <span class="badge bg-success rounded-pill">
                                        <i class="fas fa-shield-alt me-1"></i>Clean
                                    </span>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}

                    {% else %}
                        <!-- Empty State -->
                        <div class="text-center py-5">
                            <div class="mb-4">
                                <i class="fas fa-shield-alt fa-4x text-muted" style="opacity: 0.3;"></i>
                            </div>
                            <h6 class="text-muted mb-2">No Analysis History Yet</h6>
                            <p class="small text-muted mb-4">Start scanning URLs and messages to see your security history.</p>
                            <a href="{% url 'phishield:check_link' %}" class="btn btn-gradient">
                                <i class="fas fa-search me-2"></i>Start Your First Scan
                            </a>
                        </div>
                    {% endif %}
                    
                    <!-- Fade gradient overlay when collapsed -->
                    <div id="timeline-fade" class="position-absolute bottom-0 w-100" style="height: 80px; background: var(--timeline-fade-bg); pointer-events: none; display: none;"></div>
                </div>
                
                <!-- View More/Less Button -->
                <div class="text-center mt-3" id="view-more-container" style="display: none;">
                    <button class="btn btn-outline-custom btn-sm" id="view-more-btn" onclick="toggleTimeline()">
                        <i class="fas fa-chevron-down me-2"></i>
                        <span id="view-more-text">View More</span>
                    </button>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
// Timeline collapse/expand functionality
document.addEventListener('DOMContentLoaded', function() {
    const timelineContainer = document.getElementById('timeline-container');
    const viewMoreContainer = document.getElementById('view-more-container');
    const timelineFade = document.getElementById('timeline-fade');
    
    // Check if content exceeds max height
    if (timelineContainer && timelineContainer.scrollHeight > 500) {
        viewMoreContainer.style.display = 'block';
        timelineFade.style.display = 'block';
    }
});

function toggleTimeline() {
    const timelineContainer = document.getElementById('timeline-container');
    const viewMoreBtn = document.getElementById('view-more-btn');
    const viewMoreText = document.getElementById('view-more-text');
    const timelineFade = document.getElementById('timeline-fade');
    const icon = viewMoreBtn.querySelector('i');
    
    if (timelineContainer.style.maxHeight === '500px') {
        // Expand
        timelineContainer.style.maxHeight = 'none';
        timelineContainer.style.overflow = 'visible';
        viewMoreText.textContent = 'View Less';
        icon.classList.remove('fa-chevron-down');
        icon.classList.add('fa-chevron-up');
        timelineFade.style.display = 'none';
    } else {
        // Collapse
        timelineContainer.style.maxHeight = '500px';
        timelineContainer.style.overflow = 'hidden';
        viewMoreText.textContent = 'View More';
        icon.classList.remove('fa-chevron-up');
        icon.classList.add('fa-chevron-down');
        timelineFade.style.display = 'block';
        
        // Scroll to top of timeline smoothly
        timelineContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
}
</script>
{% endblock %}